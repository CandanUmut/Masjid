<!doctype html>
<html lang="tr" data-lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Mescid namaz vakitleri ve cemaat (ikame) saatleri â€” konuma gÃ¶re otomatik, paylaÅŸÄ±labilir." />
  <meta name="theme-color" content="#0b0f14" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f6f7fb" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Prayer Hub" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>Mescid Vakitleri</title>

  <link rel="manifest" href="./manifest.json" />

  <link rel="stylesheet" href="./styles.css" />
   <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/favicon-16.png" />


  <!-- iOS Home Screen Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/apple-touch-icon.png" />

  <!-- Android / PWA icons (some browsers use these even outside manifest) -->
  <link rel="icon" type="image/png" sizes="192x192" href="./assets/icons/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="./assets/icons/icon-512.png" />

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <script>
    window.__SUPABASE_URL = "https://rnatxpcjqszgjlvznhwd.supabase.co";
    window.__SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJuYXR4cGNqcXN6Z2psdnpuaHdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMTA4OTEsImV4cCI6MjA4MDg4Njg5MX0.rwuFyq0XdXDG822d2lUqdxHvTq4OAIUtdXebh0aXCCc";
  </script>

  <script src="./app.js" defer></script>
</head>

<body>
  <a class="skip-link" href="#main" data-i18n="skip">Ä°Ã§eriÄŸe atla</a>

  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <div class="brand__mark" aria-hidden="true">ğŸ•Œ</div>
        <div class="brand__text">
          <div class="brand__title" id="masjidName" data-i18n="masjid">Mescid</div>
          <div class="brand__subtitle">
            <span id="masjidSubtitle" data-i18n="todaySubtitle">BugÃ¼nÃ¼n Vakitleri</span>
            <span class="dot" id="masjidSubtitleSep" aria-hidden="true">â€¢</span>
            <span id="masjidCity">â€”</span>
            <span class="dot" aria-hidden="true">â€¢</span>
            <span id="todayDate">â€”</span>
          </div>
        </div>
      </div>

      <div class="topbar__actions">
        <span class="offline-badge" id="offlineBadge" data-i18n="offline" hidden>Ã‡evrimdÄ±ÅŸÄ±</span>
        <button class="btn btn--primary" id="installBtn" type="button" data-i18n="install" hidden>YÃ¼kle</button>
        <button class="btn btn--ghost" id="settingsBtn" type="button" aria-label="AyarlarÄ± aÃ§" data-i18n="settings">
          Ayarlar
        </button>
        <span class="user-badge" id="userBadge" hidden></span>
        <button class="btn btn--ghost" id="loginBtn" type="button" aria-label="GiriÅŸ yap" data-i18n="login">
          Login
        </button>
        <button class="btn btn--ghost" id="adminBtn" type="button" aria-label="YÃ¶netim panelini aÃ§" data-i18n="admin" hidden>
          Admin
        </button>
        <button class="btn btn--ghost" id="langToggleBtn" type="button" aria-label="Dil deÄŸiÅŸtir">
          <span class="mono">TR / EN</span>
        </button>
        <button class="btn btn--ghost" id="copyLinkBtn" type="button" aria-label="PaylaÅŸÄ±m linkini kopyala" data-i18n="copyLink">
          Linki Kopyala
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="container">
    <section class="card" id="slugGate" hidden>
      <h1 class="h1" data-i18n="slugTitle">Mescid Linki</h1>
      <p class="muted" data-i18n="slugHelp">
        Bu sayfa genellikle paylaÅŸÄ±lmÄ±ÅŸ bir link ile aÃ§Ä±lÄ±r: /?m=mescid-slug. Slug yoksa aÅŸaÄŸÄ±dan gir.
      </p>

      <div class="row">
        <label class="field">
          <span class="field__label" data-i18n="slugLabel">Mescid Slug</span>
          <input id="slugInput" class="input" type="text" placeholder="Ã¶r: sanjose-umut-mescid" autocomplete="off" />
        </label>
        <button id="openSlugBtn" class="btn" type="button" data-i18n="open">AÃ§</button>
      </div>

      <p class="muted small" data-i18n="slugExample">
        Ã–rnek: ?m=sanjose-umut-mescid | Ä°kame seti: &set=main
      </p>
    </section>

    <section class="grid">
      <section class="card card--highlight">
        <div class="card__header">
          <h2 class="h2" data-i18n="nextTitle">Åimdi / SÄ±radaki</h2>
          <span class="badge" id="tzBadge" title="Saat dilimi">TZ: â€”</span>
        </div>

        <div class="next">
          <div class="next__left">
            <div class="now-next">
              <div class="now-next__block">
                <div class="next__label" data-i18n="now">Åimdi</div>
                <div class="next__time" id="nowPrayerName">â€”</div>
                <div class="next__meta" id="nowPrayerStatus">â€”</div>
                <div class="next__sub" id="nowPrayerStart">â€”</div>
              </div>
              <div class="now-next__block">
                <div class="next__label" data-i18n="next">SÄ±radaki</div>
                <div class="next__time" id="nextPrayerLabel">â€”</div>
                <div class="next__meta">
                  <span class="pill" id="nextTypePill" data-i18n="begins">Vakit giriÅŸi</span>
                  <span class="muted mono" id="nextPrayerTime">--:--</span>
                </div>
                <div class="next__sub" id="nextMeta">â€”</div>
                <div class="next__sub" id="nextIqamaLine">â€”</div>
              </div>
            </div>
          </div>

          <div class="next__right">
            <div class="countdown">
              <div class="countdown__label" data-i18n="remaining">BaÅŸlamasÄ±na</div>
              <div class="countdown__value" id="countdown">--:--:--</div>
            </div>

            <div class="stack">
              <button class="btn btn--ghost" id="refreshBtn" type="button" data-i18n="refresh">Yenile</button>
              <button class="btn btn--ghost" id="useLocationBtn" type="button" data-i18n="getLocation">Konum Al</button>
            </div>
          </div>
        </div>

        <hr class="sep" />

        <div class="row row--wrap">
          <div class="kv">
            <div class="kv__k" data-i18n="location">Konum</div>
            <div class="kv__v" id="locationStatus">â€”</div>
            <div class="kv__sub" id="locationCoords">â€”</div>
          </div>
          <div class="kv">
            <div class="kv__k" data-i18n="source">Kaynak</div>
            <div class="kv__v" id="providerStatus">â€”</div>
          </div>
          <div class="kv" id="iqamaSetWrap">
          <div class="kv__k" data-i18n="iqamaSet">Ä°kame Seti</div>
          <div class="kv__v">
            <select id="iqamaSetSelect" class="select" aria-label="Ä°kame seti seÃ§">
              <option value="">â€”</option>
            </select>
            <div class="helper" id="iqamaSetHelper"></div>
            <button class="btn btn--ghost btn--tiny" id="iqamaSetCreateBtn" type="button" data-i18n="createDefaultSet" hidden>
              VarsayÄ±lan set oluÅŸtur
            </button>
          </div>
        </div>
      </div>

        <details class="details" id="manualLocationDetails">
          <summary data-i18n="manualLocationSummary">Konum izni yoksa ÅŸehir/adres gir</summary>
          <div class="row row--wrap">
            <label class="field grow">
              <span class="field__label" data-i18n="manualLocationLabel">Åehir / Adres</span>
              <input id="manualLocationInput" class="input" type="text" placeholder="Ã¶r: San Jose, CA" autocomplete="street-address" />
            </label>
            <button id="manualLocationBtn" class="btn" type="button" data-i18n="search">Ara</button>
          </div>
          <p class="muted small" data-i18n="manualLocationNote">
            Not: Bu giriÅŸ yaklaÅŸÄ±k konumla vakit Ã§ekmek iÃ§indir. En doÄŸru sonuÃ§ iÃ§in konum izni Ã¶nerilir.
          </p>
        </details>
      </section>

      <section class="card">
        <div class="card__header">
          <h2 class="h2" data-i18n="todayTitle">BugÃ¼nÃ¼n Vakitleri</h2>
          <span class="badge" id="dataFreshnessBadge" title="Veri durumu">â€”</span>
        </div>

        <div class="table-wrap" role="region" aria-label="Namaz vakitleri tablosu" tabindex="0">
          <table class="table" id="timesTable">
            <thead>
              <tr>
                <th scope="col" data-i18n="prayer">Vakit</th>
                <th scope="col" class="col-time" data-i18n="adhanSafe">Vakit GiriÅŸi (Ä°htiyatlÄ±)</th>
                <th scope="col" class="col-time" data-i18n="iqama">Ä°kame (Cemaat)</th>
                <th scope="col" data-i18n="status">Durum</th>
              </tr>
            </thead>
            <tbody>
              <tr data-prayer="fajr">
                <th scope="row">Fajr</th>
                <td data-label="Vakit giriÅŸi" class="mono">--:--</td>
                <td data-label="Ä°kame" class="mono">--:--</td>
                <td data-label="Durum" class="muted">â€”</td>
              </tr>
              <tr data-prayer="dhuhr">
                <th scope="row">Dhuhr</th>
                <td data-label="Vakit giriÅŸi" class="mono">--:--</td>
                <td data-label="Ä°kame" class="mono">--:--</td>
                <td data-label="Durum" class="muted">â€”</td>
              </tr>
              <tr data-prayer="asr">
                <th scope="row">Asr</th>
                <td data-label="Vakit giriÅŸi" class="mono">--:--</td>
                <td data-label="Ä°kame" class="mono">--:--</td>
                <td data-label="Durum" class="muted">â€”</td>
              </tr>
              <tr data-prayer="maghrib">
                <th scope="row">Maghrib</th>
                <td data-label="Vakit giriÅŸi" class="mono">--:--</td>
                <td data-label="Ä°kame" class="mono">--:--</td>
                <td data-label="Durum" class="muted">â€”</td>
              </tr>
              <tr data-prayer="isha">
                <th scope="row">Isha</th>
                <td data-label="Vakit giriÅŸi" class="mono">--:--</td>
                <td data-label="Ä°kame" class="mono">--:--</td>
                <td data-label="Durum" class="muted">â€”</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="foot">
          <div class="muted small" id="safetyNote" data-i18n="safetyNote">
            GÃ¶rÃ¼ntÃ¼lenen vakit giriÅŸleri ihtiyat payÄ± iÃ§erir.
          </div>
          <div class="muted small" id="disclaimer" data-i18n="disclaimer">
            Ä°htiyat ve yÃ¶ntem detaylarÄ± aÅŸaÄŸÄ±daki â€œDetaylarâ€ bÃ¶lÃ¼mÃ¼nde gÃ¶rÃ¼nÃ¼r.
          </div>
        </div>
      </section>
    </section>

    <section class="card">
      <div class="card__header">
        <h2 class="h2" data-i18n="detailsTitle">Ayarlar / Detaylar</h2>
        <span class="badge badge--soft" id="methodBadge">Method: â€”</span>
      </div>

      <div class="details-grid">
        <details class="details" open>
          <summary data-i18n="calcSummary">Hesaplama yÃ¶ntemi</summary>
          <div class="kvlist">
            <div class="kv">
              <div class="kv__k" data-i18n="provider">Provider</div>
              <div class="kv__v" id="calcProvider">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="methodId">Method ID</div>
              <div class="kv__v" id="calcMethodId">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="asrSchool">Asr (School)</div>
              <div class="kv__v" id="calcSchool">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="highLat">High Latitude Rule</div>
              <div class="kv__v" id="calcHighLat">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="tune">Tune/Adjust</div>
              <div class="kv__v" id="calcTune">â€”</div>
            </div>
          </div>

          <p class="muted small" data-i18n="asrNote">
            Not: Asr â€œhanafiâ€ daha geÃ§ Ã§Ä±kabilir. Bu ayar mescid profilinde ÅŸeffafÃ§a belirtilir.
          </p>
        </details>

        <details class="details">
          <summary data-i18n="safetySummary">Ä°htiyat (Safety Buffer) dakikalarÄ±</summary>
          <div class="kvlist" id="safetyList">
            <div class="kv"><div class="kv__k">Fajr</div><div class="kv__v mono" data-safety="fajr">â€”</div></div>
            <div class="kv"><div class="kv__k">Dhuhr</div><div class="kv__v mono" data-safety="dhuhr">â€”</div></div>
            <div class="kv"><div class="kv__k">Asr</div><div class="kv__v mono" data-safety="asr">â€”</div></div>
            <div class="kv"><div class="kv__k">Maghrib</div><div class="kv__v mono" data-safety="maghrib">â€”</div></div>
            <div class="kv"><div class="kv__k">Isha</div><div class="kv__v mono" data-safety="isha">â€”</div></div>
          </div>
        </details>

        <details class="details">
          <summary data-i18n="shareSummary">PaylaÅŸ</summary>
          <div class="row row--wrap">
            <label class="field grow">
              <span class="field__label" data-i18n="shareLinkLabel">PaylaÅŸÄ±m Linki</span>
              <input class="input mono" id="shareLinkInput" type="text" readonly value="" />
            </label>
            <button class="btn" id="copyLinkBtn2" type="button" data-i18n="copy">Kopyala</button>
          </div>
          <p class="muted small" data-i18n="shareNote">
            Link formatÄ±: <code>/?m=&lt;slug&gt;</code> veya <code>/?m=&lt;slug&gt;&amp;set=&lt;iqamaSetId&gt;</code>
          </p>
        </details>
      </div>
    </section>

    <footer class="footer">
      <div class="muted small" data-i18n="footer">
        Kaynaklar ve yÃ¶ntem bilgisi mescid profilinden gelir. Bu sayfa yalnÄ±zca bilgi amaÃ§lÄ±dÄ±r.
      </div>
    </footer>

    <div class="action-bar" id="actionBar" aria-label="HÄ±zlÄ± iÅŸlemler">
      <button class="action-bar__btn" id="actionRefreshBtn" type="button" data-i18n="refresh">Yenile</button>
      <button class="action-bar__btn" id="actionLocationBtn" type="button" data-i18n="getLocation">Konum Al</button>
      <button class="action-bar__btn" id="actionSettingsBtn" type="button" data-i18n="settings">Ayarlar</button>
      <button class="action-bar__btn" id="actionAdminBtn" type="button" data-i18n="admin" hidden>Admin</button>
    </div>

    <div class="modal" id="settingsModal" hidden>
      <div class="modal__backdrop" data-close="settings"></div>
      <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
        <div class="modal__header">
          <h2 class="h2" id="settingsTitle" data-i18n="settings">Ayarlar</h2>
          <button class="btn btn--ghost" id="settingsCloseBtn" type="button" aria-label="Kapat">âœ•</button>
        </div>
        <div class="modal__body">
          <section class="settings-section">
            <h3 class="h3" data-i18n="methodSettings">Hesaplama YÃ¶ntemi</h3>
            <div class="row row--wrap">
              <label class="field">
                <span class="field__label" data-i18n="methodId">Method ID</span>
                <select id="methodSelect" class="select" aria-label="Method ID"></select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="asrSchool">Asr (School)</span>
                <select id="schoolSelect" class="select" aria-label="Asr school">
                  <option value="standard">Standard</option>
                  <option value="hanafi">Hanafi</option>
                </select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="highLat">High Latitude Rule</span>
                <select id="highLatSelect" class="select" aria-label="High latitude rule">
                  <option value="angleBased">Angle-based</option>
                  <option value="midnight">Midnight</option>
                  <option value="oneSeventh">One-Seventh</option>
                </select>
              </label>
            </div>
            <div class="row row--wrap">
              <label class="field">
                <span class="field__label" data-i18n="tuneFajr">Tune Fajr</span>
                <input id="tuneFajrInput" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="tuneDhuhr">Tune Dhuhr</span>
                <input id="tuneDhuhrInput" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="tuneAsr">Tune Asr</span>
                <input id="tuneAsrInput" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="tuneMaghrib">Tune Maghrib</span>
                <input id="tuneMaghribInput" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="tuneIsha">Tune Isha</span>
                <input id="tuneIshaInput" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
            </div>
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="tuneAdvanced">Advanced tune (AlAdhan)</span>
                <input id="tuneAdvancedInput" class="input mono" type="text" placeholder="0,0,0,0,0,0,0,0,0" />
              </label>
            </div>
            <div class="row row--wrap">
              <button class="btn btn--ghost" id="resetMethodBtn" type="button" data-i18n="resetMethod">Mescid varsayÄ±lanÄ±na dÃ¶n</button>
              <div class="muted small" id="methodScopeNote">â€”</div>
            </div>
          </section>

          <section class="settings-section">
            <h3 class="h3" data-i18n="savedLocations">KayÄ±tlÄ± Konumlar</h3>
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="savedLocationsLabel">KayÄ±tlÄ± konumlar</span>
                <select id="savedLocationsSelect" class="select" aria-label="KayÄ±tlÄ± konumlar"></select>
              </label>
              <button id="useSavedLocationBtn" class="btn" type="button" data-i18n="use">Kullan</button>
              <button id="removeSavedLocationBtn" class="btn btn--ghost" type="button" data-i18n="remove">Sil</button>
            </div>
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="saveCurrentLabel">Mevcut konumu kaydet</span>
                <input id="saveLocationLabelInput" class="input" type="text" placeholder="Ã¶r: Ev" />
              </label>
              <button id="saveLocationBtn" class="btn" type="button" data-i18n="save">Kaydet</button>
            </div>
            <p class="muted small" data-i18n="savedLocationsNote">
              Konumlar cihazda saklanÄ±r ve Supabase'e yazÄ±lmaz.
            </p>
          </section>

          <section class="settings-section">
            <h3 class="h3" data-i18n="language">Dil</h3>
            <button class="btn btn--ghost" id="langToggleBtn2" type="button">
              <span class="mono">TR / EN</span>
            </button>
          </section>
        </div>
      </div>
    </div>

    <div class="modal" id="loginModal" hidden>
      <div class="modal__backdrop" data-close="login"></div>
      <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
        <div class="modal__header">
          <h2 class="h2" id="loginTitle" data-i18n="login">Login</h2>
          <button class="btn btn--ghost" id="loginCloseBtn" type="button" aria-label="Kapat">âœ•</button>
        </div>
        <div class="modal__body">
          <p class="muted small" data-i18n="loginHelp">GiriÅŸ linki e-posta adresinize gÃ¶nderilir.</p>
          <div class="row row--wrap">
            <label class="field grow">
              <span class="field__label" data-i18n="email">E-posta</span>
              <input id="loginEmailInput" class="input" type="email" placeholder="you@example.com" autocomplete="email" />
            </label>
            <button id="loginSendBtn" class="btn" type="button" data-i18n="sendLogin">GiriÅŸ linki gÃ¶nder</button>
          </div>
          <div class="muted small" id="loginStatus">â€”</div>
        </div>
      </div>
    </div>

    <div class="modal" id="adminModal" hidden>
      <div class="modal__backdrop" data-close="admin"></div>
      <div class="modal__panel modal__panel--wide" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
        <div class="modal__header">
          <h2 class="h2" id="adminTitle" data-i18n="masjidBuilderTitle">Masjid Builder</h2>
          <button class="btn btn--ghost" id="adminCloseBtn" type="button" aria-label="Kapat">âœ•</button>
        </div>
        <div class="modal__body">
          <div class="builder-meta">
            <span class="muted small" id="authStatus">â€”</span>
            <button id="signOutBtn" class="btn btn--ghost btn--small" type="button" data-i18n="signOut">Ã‡Ä±kÄ±ÅŸ</button>
          </div>

          <div class="builder-steps" role="tablist" aria-label="Masjid Builder steps">
            <button class="builder-step-btn is-active" type="button" data-step="1" data-i18n="stepBasics">Basics</button>
            <button class="builder-step-btn" type="button" data-step="2" data-i18n="stepIqama">Iqama</button>
            <button class="builder-step-btn" type="button" data-step="3" data-i18n="stepMethod">Method</button>
            <button class="builder-step-btn" type="button" data-step="4" data-i18n="stepSafety">Safety & Publish</button>
          </div>

          <div class="builder-panel is-active" data-step="1">
          <div class="row row--wrap">
            <div class="builder-inline" id="builderEditWrap" hidden>
              <span class="pill" id="builderEditLabel">â€”</span>
              <button class="btn btn--ghost btn--small" id="builderUseCurrentBtn" type="button" data-i18n="editMasjid">
                Mescid DÃ¼zenle
              </button>
            </div>
          </div>

            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="masjidName">Mescid Ä°smi</span>
                <input id="builderNameMain" class="input" type="text" required />
              </label>
              <label class="field field--toggle">
                <span class="field__label" data-i18n="addEnglish">Add English translation</span>
                <input id="builderNameEnToggle" type="checkbox" />
              </label>
            </div>
            <div class="row row--wrap" id="builderNameEnRow" hidden>
              <label class="field grow">
                <span class="field__label">English (optional)</span>
                <input id="builderNameEn" class="input" type="text" />
              </label>
            </div>

            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="city">Åehir</span>
                <input id="builderCityMain" class="input" type="text" />
              </label>
              <label class="field field--toggle">
                <span class="field__label" data-i18n="addEnglish">Add English translation</span>
                <input id="builderCityEnToggle" type="checkbox" />
              </label>
            </div>
            <div class="row row--wrap" id="builderCityEnRow" hidden>
              <label class="field grow">
                <span class="field__label">English (optional)</span>
                <input id="builderCityEn" class="input" type="text" />
              </label>
            </div>

            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="slugLabel">Mescid Slug</span>
                <input id="builderSlugInput" class="input" type="text" placeholder="ornek-mescid" autocomplete="off" />
              </label>
              <button id="builderCheckSlugBtn" class="btn btn--ghost" type="button" data-i18n="checkAvailability">Check availability</button>
            </div>
            <div class="helper" id="slugStatus"></div>
            <div class="helper" id="slugSuggestions"></div>

            <section class="builder-card">
              <h3 class="h3" data-i18n="myMasjids">Mescidlerim</h3>
              <div class="row row--wrap">
                <label class="field grow">
                  <span class="field__label" data-i18n="myMasjidsLabel">Sahip olduÄŸum mescidler</span>
                  <select id="myMasjidsSelect" class="select" aria-label="My masjids"></select>
                </label>
                <button id="openMasjidBtn" class="btn" type="button" data-i18n="open">AÃ§</button>
              </div>
              <p class="muted small" data-i18n="myMasjidsNote">Sadece size ait mescidler listelenir.</p>
            </section>
          </div>

          <div class="builder-panel" data-step="2">
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="iqamaSet">Ä°kame Seti</span>
                <select id="builderIqamaSetSelect" class="select"></select>
              </label>
              <button id="builderAddIqamaSetBtn" class="btn btn--ghost" type="button" data-i18n="addIqamaSet">Set ekle</button>
              <button id="builderRemoveIqamaSetBtn" class="btn btn--ghost" type="button" data-i18n="remove">Sil</button>
            </div>
            <div class="iqama-editor" id="builderIqamaEditor"></div>
          </div>

          <div class="builder-panel" data-step="3">
            <div class="row row--wrap">
              <label class="field">
                <span class="field__label" data-i18n="methodId">Method ID</span>
                <select id="builderMethodId" class="select"></select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="asrSchool">Asr (School)</span>
                <select id="builderSchool" class="select">
                  <option value="standard">Standard</option>
                  <option value="hanafi">Hanafi</option>
                </select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="highLat">High Latitude Rule</span>
                <select id="builderHighLat" class="select">
                  <option value="angleBased">Angle-based</option>
                  <option value="midnight">Midnight</option>
                  <option value="oneSeventh">One-Seventh</option>
                </select>
              </label>
            </div>
            <details class="details">
              <summary data-i18n="advanced">Advanced tune</summary>
              <div class="row row--wrap">
                <label class="field">
                  <span class="field__label" data-i18n="tuneFajr">Tune Fajr</span>
                  <input id="builderTuneFajr" class="input" type="number" inputmode="numeric" placeholder="0" />
                </label>
                <label class="field">
                  <span class="field__label" data-i18n="tuneDhuhr">Tune Dhuhr</span>
                  <input id="builderTuneDhuhr" class="input" type="number" inputmode="numeric" placeholder="0" />
                </label>
                <label class="field">
                  <span class="field__label" data-i18n="tuneAsr">Tune Asr</span>
                  <input id="builderTuneAsr" class="input" type="number" inputmode="numeric" placeholder="0" />
                </label>
                <label class="field">
                  <span class="field__label" data-i18n="tuneMaghrib">Tune Maghrib</span>
                  <input id="builderTuneMaghrib" class="input" type="number" inputmode="numeric" placeholder="0" />
                </label>
                <label class="field">
                  <span class="field__label" data-i18n="tuneIsha">Tune Isha</span>
                  <input id="builderTuneIsha" class="input" type="number" inputmode="numeric" placeholder="0" />
                </label>
              </div>
            </details>
          </div>

          <div class="builder-panel" data-step="4">
            <div class="row row--wrap">
              <label class="field">
                <span class="field__label" data-i18n="safetyFajr">Fajr</span>
                <input id="builderSafetyFajr" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="safetyDhuhr">Dhuhr</span>
                <input id="builderSafetyDhuhr" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="safetyAsr">Asr</span>
                <input id="builderSafetyAsr" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="safetyMaghrib">Maghrib</span>
                <input id="builderSafetyMaghrib" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="safetyIsha">Isha</span>
                <input id="builderSafetyIsha" class="input" type="number" inputmode="numeric" placeholder="0" />
              </label>
            </div>

            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="timezone">Timezone</span>
                <input id="builderTimezone" class="input" type="text" list="timezones" placeholder="Europe/Istanbul" />
              </label>
              <label class="field">
                <span class="field__label" data-i18n="isPublic">Public</span>
                <select id="builderIsPublic" class="select">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </label>
            </div>
          </div>

          <div class="builder-footer">
            <button class="btn btn--ghost" id="builderPrevBtn" type="button" data-i18n="back">Geri</button>
            <button class="btn btn--ghost" id="builderNextBtn" type="button" data-i18n="next">Ä°leri</button>
            <button class="btn btn--primary" id="saveMasjidBtn" type="button" data-i18n="saveMasjid">Kaydet</button>
          </div>
        </div>
      </div>
    </div>

    <datalist id="timezones">
      <option value="Europe/Istanbul"></option>
      <option value="Europe/London"></option>
      <option value="America/New_York"></option>
      <option value="America/Chicago"></option>
      <option value="America/Los_Angeles"></option>
      <option value="Asia/Riyadh"></option>
      <option value="Asia/Dubai"></option>
      <option value="Asia/Kuala_Lumpur"></option>
      <option value="Australia/Sydney"></option>
    </datalist>

    <script type="application/json" id="i18nDict">
    {
      "tr": {
        "skip": "Ä°Ã§eriÄŸe atla",
        "masjid": "Mescid",
        "appTitle": "Mescid Vakitleri",
        "todaySubtitle": "BugÃ¼nÃ¼n Vakitleri",
        "settings": "Ayarlar",
        "admin": "Admin",
        "copyLink": "Linki Kopyala",
        "install": "YÃ¼kle",
        "installTip": "iOS iÃ§in: PaylaÅŸ â†’ Ana Ekrana Ekle",
        "updateAvailable": "GÃ¼ncelleme mevcut",
        "refreshPage": "Yenile",
        "offline": "Ã‡evrimdÄ±ÅŸÄ±",
        "slugTitle": "Mescid Linki",
        "slugHelp": "Bu sayfa genellikle paylaÅŸÄ±lmÄ±ÅŸ bir link ile aÃ§Ä±lÄ±r: /?m=mescid-slug. Slug yoksa aÅŸaÄŸÄ±dan gir.",
        "slugLabel": "Mescid Slug",
        "open": "AÃ§",
        "slugExample": "Ã–rnek: ?m=sanjose-umut-mescid | Ä°kame seti: &set=main",
        "nextTitle": "Åimdi / SÄ±radaki",
        "now": "Åimdi",
        "next": "SÄ±radaki",
        "begins": "Vakit giriÅŸi",
        "beganAt": "BaÅŸladÄ±",
        "gps": "GPS",
        "current": "Åu an",
        "remaining": "BaÅŸlamasÄ±na",
        "startsIn": "BaÅŸlamasÄ±na",
        "inProgress": "Vakit devam ediyor",
        "endsIn": "Bitmesine",
        "ended": "Vakit Ã§Ä±ktÄ±",
        "refresh": "Yenile",
        "getLocation": "Konum Al",
        "location": "Konum",
        "source": "Kaynak",
        "iqamaSet": "Ä°kame Seti",
        "manualLocationSummary": "Konum izni yoksa ÅŸehir/adres gir",
        "manualLocationLabel": "Åehir / Adres",
        "search": "Ara",
        "manualLocationNote": "Not: Bu giriÅŸ yaklaÅŸÄ±k konumla vakit Ã§ekmek iÃ§indir. En doÄŸru sonuÃ§ iÃ§in konum izni Ã¶nerilir.",
        "todayTitle": "BugÃ¼nÃ¼n Vakitleri",
        "prayer": "Vakit",
        "adhanSafe": "Vakit giriÅŸi (Ä°htiyatlÄ±)",
        "iqama": "Ä°kame (Cemaat)",
        "status": "Durum",
        "safetyNote": "GÃ¶rÃ¼ntÃ¼lenen vakit giriÅŸleri ihtiyat payÄ± iÃ§erir.",
        "disclaimer": "Ä°htiyat ve yÃ¶ntem detaylarÄ± aÅŸaÄŸÄ±daki â€œDetaylarâ€ bÃ¶lÃ¼mÃ¼nde gÃ¶rÃ¼nÃ¼r.",
        "detailsTitle": "Ayarlar / Detaylar",
        "calcSummary": "Hesaplama yÃ¶ntemi",
        "provider": "Provider",
        "methodId": "Method ID",
        "asrSchool": "Asr (School)",
        "highLat": "High Latitude Rule",
        "tune": "Tune/Adjust",
        "asrNote": "Not: Asr â€œhanafiâ€ daha geÃ§ Ã§Ä±kabilir. Bu ayar mescid profilinde ÅŸeffafÃ§a belirtilir.",
        "safetySummary": "Ä°htiyat (Safety Buffer) dakikalarÄ±",
        "shareSummary": "PaylaÅŸ",
        "shareLinkLabel": "PaylaÅŸÄ±m Linki",
        "copy": "Kopyala",
        "shareNote": "Link formatÄ±: /?m=<slug> veya /?m=<slug>&set=<iqamaSetId>",
        "methodSettings": "Hesaplama YÃ¶ntemi",
        "resetMethod": "Mescid varsayÄ±lanÄ±na dÃ¶n",
        "savedLocations": "KayÄ±tlÄ± Konumlar",
        "savedLocationsLabel": "KayÄ±tlÄ± konumlar",
        "saveCurrentLabel": "Mevcut konumu kaydet",
        "save": "Kaydet",
        "remove": "Sil",
        "use": "Kullan",
        "savedLocationsNote": "Konumlar cihazda saklanÄ±r ve Supabase'e yazÄ±lmaz.",
        "language": "Dil",
        "footer": "Kaynaklar ve yÃ¶ntem bilgisi mescid profilinden gelir. Bu sayfa yalnÄ±zca bilgi amaÃ§lÄ±dÄ±r.",
        "authTitle": "Oturum",
        "email": "E-posta",
        "sendLogin": "GiriÅŸ linki gÃ¶nder",
        "signOut": "Ã‡Ä±kÄ±ÅŸ",
        "myMasjids": "Mescidlerim",
        "myMasjidsLabel": "Sahip olduÄŸum mescidler",
        "myMasjidsNote": "Sadece size ait mescidler listelenir.",
        "createMasjid": "Mescid OluÅŸtur",
        "editMasjid": "Mescid DÃ¼zenle",
        "generateSlug": "Slug Ã¼ret",
        "nameTr": "Ä°sim (TR)",
        "nameEn": "Name (EN)",
        "cityTr": "Åehir (TR)",
        "cityEn": "City (EN)",
        "timezone": "Saat Dilimi",
        "isPublic": "Herkese aÃ§Ä±k",
        "calcMethod": "Hesaplama yÃ¶ntemi",
        "tuneFajr": "Tune Fajr",
        "tuneDhuhr": "Tune Dhuhr",
        "tuneAsr": "Tune Asr",
        "tuneMaghrib": "Tune Maghrib",
        "tuneIsha": "Tune Isha",
        "tuneAdvanced": "GeliÅŸmiÅŸ tune (AlAdhan)",
        "safetyOffsets": "Ä°htiyat dakikalarÄ±",
        "iqamaSets": "Ä°kame Setleri",
        "iqamaSetsHint": "Offset boÅŸsa sabit saat kullanÄ±lÄ±r. Sabit saat formatÄ±: HH:MM.",
        "addSet": "Set Ekle",
        "create": "OluÅŸtur",
        "reset": "SÄ±fÄ±rla",
        "delete": "Sil"
      },
      "en": {
        "skip": "Skip to content",
        "masjid": "Masjid",
        "appTitle": "Masjid Timings",
        "todaySubtitle": "Today's Timings",
        "settings": "Settings",
        "admin": "Admin",
        "copyLink": "Copy link",
        "install": "Install",
        "installTip": "On iOS: Share â†’ Add to Home Screen",
        "updateAvailable": "Update available",
        "refreshPage": "Refresh",
        "offline": "Offline",
        "slugTitle": "Masjid Link",
        "slugHelp": "This page is usually opened via a shared link: /?m=masjid-slug. If missing, enter it below.",
        "slugLabel": "Masjid Slug",
        "open": "Open",
        "slugExample": "Example: ?m=sanjose-umut-mescid | Iqama set: &set=main",
        "nextTitle": "Now / Next",
        "now": "Now",
        "next": "Next",
        "begins": "Begins",
        "beganAt": "Began at",
        "gps": "GPS",
        "current": "Current",
        "remaining": "Starts in",
        "startsIn": "Starts in",
        "inProgress": "In progress",
        "endsIn": "Ends in",
        "ended": "Ended",
        "refresh": "Refresh",
        "getLocation": "Get location",
        "location": "Location",
        "source": "Source",
        "iqamaSet": "Iqama Set",
        "manualLocationSummary": "If location is blocked, enter city/address",
        "manualLocationLabel": "City / Address",
        "search": "Search",
        "manualLocationNote": "Note: This uses an approximate location to fetch timings. For best accuracy, allow location access.",
        "todayTitle": "Today's Timings",
        "prayer": "Prayer",
        "adhanSafe": "Begins (Safety-adjusted)",
        "iqama": "Iqama (Congregation)",
        "status": "Status",
        "safetyNote": "Displayed begin times include safety offsets.",
        "disclaimer": "Safety offsets and calculation details are shown in the â€œDetailsâ€ section below.",
        "detailsTitle": "Settings / Details",
        "calcSummary": "Calculation method",
        "provider": "Provider",
        "methodId": "Method ID",
        "asrSchool": "Asr (School)",
        "highLat": "High Latitude Rule",
        "tune": "Tune/Adjust",
        "asrNote": "Note: Hanafi Asr can be later. This will be transparently shown in the masjid profile.",
        "safetySummary": "Safety offsets (minutes)",
        "shareSummary": "Share",
        "shareLinkLabel": "Share link",
        "copy": "Copy",
        "shareNote": "Link format: /?m=<slug> or /?m=<slug>&set=<iqamaSetId>",
        "methodSettings": "Calculation Method",
        "resetMethod": "Reset to masjid defaults",
        "savedLocations": "Saved Locations",
        "savedLocationsLabel": "Saved locations",
        "saveCurrentLabel": "Save current location",
        "save": "Save",
        "remove": "Remove",
        "use": "Use",
        "savedLocationsNote": "Locations are stored on this device and never written to Supabase.",
        "language": "Language",
        "footer": "Method and settings come from the masjid profile. This page is informational.",
        "authTitle": "Session",
        "email": "Email",
        "sendLogin": "Send login link",
        "signOut": "Sign out",
        "myMasjids": "My masjids",
        "myMasjidsLabel": "Owned masjids",
        "myMasjidsNote": "Only masjids you own are listed.",
        "createMasjid": "Create Masjid",
        "editMasjid": "Edit Masjid",
        "generateSlug": "Generate slug",
        "nameTr": "Name (TR)",
        "nameEn": "Name (EN)",
        "cityTr": "City (TR)",
        "cityEn": "City (EN)",
        "timezone": "Timezone",
        "isPublic": "Public",
        "calcMethod": "Calculation method",
        "tuneFajr": "Tune Fajr",
        "tuneDhuhr": "Tune Dhuhr",
        "tuneAsr": "Tune Asr",
        "tuneMaghrib": "Tune Maghrib",
        "tuneIsha": "Tune Isha",
        "tuneAdvanced": "Advanced tune (AlAdhan)",
        "safetyOffsets": "Safety offsets",
        "iqamaSets": "Iqama Sets",
        "iqamaSetsHint": "If offset is empty, fixed time is used. Fixed time format: HH:MM.",
        "addSet": "Add Set",
        "create": "Create",
        "reset": "Reset",
        "delete": "Delete"
      }
    }
    </script>
  </main>
</body>
</html>
