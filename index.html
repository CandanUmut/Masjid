<!-- index.html -->
<!doctype html>
<html lang="tr" data-lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Mescid namaz vakitleri ve cemaat (ikame) saatleri â€” konuma gÃ¶re otomatik, paylaÅŸÄ±labilir." />
  <title>Mescid Vakitleri</title>

  <link rel="stylesheet" href="./styles.css" />
  <link rel="icon" href="data:,">

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <!-- Minimal config placeholders (fill later) -->
  <script>
    // TODO: Fill these before deploying

    window.__SUPABASE_URL = "https://rnatxpcjqszgjlvznhwd.supabase.co";       // e.g. https://xxxx.supabase.co
    window.__SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJuYXR4cGNqcXN6Z2psdnpuaHdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMTA4OTEsImV4cCI6MjA4MDg4Njg5MX0.rwuFyq0XdXDG822d2lUqdxHvTq4OAIUtdXebh0aXCCc";  // e.g. eyJhbGciOi...
  </script>

  <!-- App logic -->
  <script src="./app.js" defer></script>
</head>

<body>
  <a class="skip-link" href="#main" data-i18n="skip">Ä°Ã§eriÄŸe atla</a>

  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <div class="brand__mark" aria-hidden="true">ğŸ•Œ</div>
        <div class="brand__text">
          <div class="brand__title" id="masjidName" data-i18n="masjid">Mescid</div>
          <div class="brand__subtitle">
            <span id="masjidCity">â€”</span>
            <span class="dot" aria-hidden="true">â€¢</span>
            <span id="todayDate">â€”</span>
          </div>
        </div>
      </div>

      <div class="topbar__actions">
        <button class="btn btn--ghost" id="settingsBtn" type="button" aria-label="AyarlarÄ± aÃ§" data-i18n="settings">
          Ayarlar
        </button>
        <button class="btn btn--ghost" id="langToggleBtn" type="button" aria-label="Dil deÄŸiÅŸtir">
          <span class="mono">TR / EN</span>
        </button>
        <button class="btn btn--ghost" id="copyLinkBtn" type="button" aria-label="PaylaÅŸÄ±m linkini kopyala" data-i18n="copyLink">
          Linki Kopyala
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="container">
    <!-- Global status / errors -->
    <section class="notice" id="notice" role="status" aria-live="polite" hidden>
      <div class="notice__dot" aria-hidden="true"></div>
      <div class="notice__text" id="noticeText">YÃ¼kleniyorâ€¦</div>
      <button class="notice__close" id="noticeClose" type="button" aria-label="Bildirimi kapat">âœ•</button>
    </section>

    <!-- Optional slug info -->
    <section class="card" id="slugGate" hidden>
      <h1 class="h1" data-i18n="slugTitle">Mescid Linki</h1>
      <p class="muted" data-i18n="slugHelp">
        Bu sayfa genellikle paylaÅŸÄ±lmÄ±ÅŸ bir link ile aÃ§Ä±lÄ±r: /?m=mescid-slug. Slug yoksa aÅŸaÄŸÄ±dan gir.
      </p>

      <div class="row">
        <label class="field">
          <span class="field__label" data-i18n="slugLabel">Mescid Slug</span>
          <input id="slugInput" class="input" type="text" placeholder="Ã¶r: sanjose-umut-mescid" autocomplete="off" />
        </label>
        <button id="openSlugBtn" class="btn" type="button" data-i18n="open">AÃ§</button>
      </div>

      <p class="muted small" data-i18n="slugExample">
        Ã–rnek: ?m=sanjose-umut-mescid | Ä°kame seti: &set=main
      </p>
    </section>

    <section class="grid">
      <section class="card">
        <div class="card__header">
          <h2 class="h2" data-i18n="nextTitle">SÄ±radaki Vakit</h2>
          <span class="badge" id="tzBadge" title="Saat dilimi">TZ: â€”</span>
        </div>

        <div class="next">
          <div class="next__left">
            <div class="next__label" id="nextPrayerLabel">â€”</div>
            <div class="next__time" id="nextPrayerTime">--:--</div>
            <div class="next__meta">
              <span class="pill" id="nextTypePill" data-i18n="adhanOrIqama">â€”</span>
              <span class="muted" id="nextMeta">â€”</span>
            </div>
            <div class="next__sub" id="nextIqamaLine">â€”</div>
          </div>

          <div class="next__right">
            <div class="countdown">
              <div class="countdown__label" data-i18n="remaining">Kalan</div>
              <div class="countdown__value" id="countdown">--:--:--</div>
            </div>

            <div class="stack">
              <button class="btn btn--ghost" id="refreshBtn" type="button" data-i18n="refresh">Yenile</button>
              <button class="btn btn--ghost" id="useLocationBtn" type="button" data-i18n="getLocation">Konum Al</button>
            </div>
          </div>
        </div>

        <hr class="sep" />

        <div class="row row--wrap">
          <div class="kv">
            <div class="kv__k" data-i18n="location">Konum</div>
            <div class="kv__v" id="locationStatus">â€”</div>
          </div>
          <div class="kv">
            <div class="kv__k" data-i18n="source">Kaynak</div>
            <div class="kv__v" id="providerStatus">â€”</div>
          </div>
          <div class="kv" id="iqamaSetWrap">
            <div class="kv__k" data-i18n="iqamaSet">Ä°kame Seti</div>
            <div class="kv__v">
              <select id="iqamaSetSelect" class="select" aria-label="Ä°kame seti seÃ§">
                <option value="">â€”</option>
              </select>
            </div>
          </div>
        </div>

        <details class="details" id="manualLocationDetails">
          <summary data-i18n="manualLocationSummary">Konum izni yoksa ÅŸehir/adres gir</summary>
          <div class="row row--wrap">
            <label class="field grow">
              <span class="field__label" data-i18n="manualLocationLabel">Åehir / Adres</span>
              <input id="manualLocationInput" class="input" type="text" placeholder="Ã¶r: San Jose, CA" autocomplete="street-address" />
            </label>
            <button id="manualLocationBtn" class="btn" type="button" data-i18n="search">Ara</button>
          </div>
          <p class="muted small" data-i18n="manualLocationNote">
            Not: Bu giriÅŸ yaklaÅŸÄ±k konumla vakit Ã§ekmek iÃ§indir. En doÄŸru sonuÃ§ iÃ§in konum izni Ã¶nerilir.
          </p>
        </details>
      </section>

      <section class="card">
        <div class="card__header">
          <h2 class="h2" data-i18n="todayTitle">BugÃ¼nÃ¼n Vakitleri</h2>
          <span class="badge" id="dataFreshnessBadge" title="Veri durumu">â€”</span>
        </div>

        <div class="table-wrap" role="region" aria-label="Namaz vakitleri tablosu" tabindex="0">
          <table class="table" id="timesTable">
            <thead>
              <tr>
                <th scope="col" data-i18n="prayer">Vakit</th>
                <th scope="col" class="col-time" data-i18n="adhanSafe">Adhan (Ä°htiyatlÄ±)</th>
                <th scope="col" class="col-time" data-i18n="iqama">Ä°kame</th>
                <th scope="col" data-i18n="status">Durum</th>
              </tr>
            </thead>
            <tbody>
              <tr data-prayer="fajr">
                <th scope="row">Fajr</th>
                <td data-label="Adhan" class="mono">--:--</td>
                <td data-label="Iqama" class="mono">--:--</td>
                <td data-label="Status" class="muted">â€”</td>
              </tr>
              <tr data-prayer="dhuhr">
                <th scope="row">Dhuhr</th>
                <td data-label="Adhan" class="mono">--:--</td>
                <td data-label="Iqama" class="mono">--:--</td>
                <td data-label="Status" class="muted">â€”</td>
              </tr>
              <tr data-prayer="asr">
                <th scope="row">Asr</th>
                <td data-label="Adhan" class="mono">--:--</td>
                <td data-label="Iqama" class="mono">--:--</td>
                <td data-label="Status" class="muted">â€”</td>
              </tr>
              <tr data-prayer="maghrib">
                <th scope="row">Maghrib</th>
                <td data-label="Adhan" class="mono">--:--</td>
                <td data-label="Iqama" class="mono">--:--</td>
                <td data-label="Status" class="muted">â€”</td>
              </tr>
              <tr data-prayer="isha">
                <th scope="row">Isha</th>
                <td data-label="Adhan" class="mono">--:--</td>
                <td data-label="Iqama" class="mono">--:--</td>
                <td data-label="Status" class="muted">â€”</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="foot">
          <div class="muted small" id="safetyNote" data-i18n="safetyNote">
            GÃ¶rÃ¼ntÃ¼lenen adhan vakitleri ihtiyat payÄ± iÃ§erir.
          </div>
          <div class="muted small" id="disclaimer" data-i18n="disclaimer">
            Ä°htiyat ve yÃ¶ntem detaylarÄ± aÅŸaÄŸÄ±daki â€œDetaylarâ€ bÃ¶lÃ¼mÃ¼nde gÃ¶rÃ¼nÃ¼r.
          </div>
        </div>
      </section>
    </section>

    <section class="card">
      <div class="card__header">
        <h2 class="h2" data-i18n="detailsTitle">Ayarlar / Detaylar</h2>
        <span class="badge badge--soft" id="methodBadge">Method: â€”</span>
      </div>

      <div class="details-grid">
        <details class="details" open>
          <summary data-i18n="calcSummary">Hesaplama yÃ¶ntemi</summary>
          <div class="kvlist">
            <div class="kv">
              <div class="kv__k" data-i18n="provider">Provider</div>
              <div class="kv__v" id="calcProvider">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="methodId">Method ID</div>
              <div class="kv__v" id="calcMethodId">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="asrSchool">Asr (School)</div>
              <div class="kv__v" id="calcSchool">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="highLat">High Latitude Rule</div>
              <div class="kv__v" id="calcHighLat">â€”</div>
            </div>
            <div class="kv">
              <div class="kv__k" data-i18n="tune">Tune/Adjust</div>
              <div class="kv__v" id="calcTune">â€”</div>
            </div>
          </div>

          <p class="muted small" data-i18n="asrNote">
            Not: Asr â€œhanafiâ€ daha geÃ§ Ã§Ä±kabilir. Bu ayar mescid profilinde ÅŸeffafÃ§a belirtilir.
          </p>
        </details>

        <details class="details">
          <summary data-i18n="safetySummary">Ä°htiyat (Safety Buffer) dakikalarÄ±</summary>
          <div class="kvlist" id="safetyList">
            <div class="kv"><div class="kv__k">Fajr</div><div class="kv__v mono" data-safety="fajr">â€”</div></div>
            <div class="kv"><div class="kv__k">Dhuhr</div><div class="kv__v mono" data-safety="dhuhr">â€”</div></div>
            <div class="kv"><div class="kv__k">Asr</div><div class="kv__v mono" data-safety="asr">â€”</div></div>
            <div class="kv"><div class="kv__k">Maghrib</div><div class="kv__v mono" data-safety="maghrib">â€”</div></div>
            <div class="kv"><div class="kv__k">Isha</div><div class="kv__v mono" data-safety="isha">â€”</div></div>
          </div>
        </details>

        <details class="details">
          <summary data-i18n="shareSummary">PaylaÅŸ</summary>
          <div class="row row--wrap">
            <label class="field grow">
              <span class="field__label" data-i18n="shareLinkLabel">PaylaÅŸÄ±m Linki</span>
              <input class="input mono" id="shareLinkInput" type="text" readonly value="" />
            </label>
            <button class="btn" id="copyLinkBtn2" type="button" data-i18n="copy">Kopyala</button>
          </div>
          <p class="muted small" data-i18n="shareNote">
            Link formatÄ±: <code>/?m=&lt;slug&gt;</code> veya <code>/?m=&lt;slug&gt;&amp;set=&lt;iqamaSetId&gt;</code>
          </p>
        </details>
      </div>
    </section>

    <footer class="footer">
      <div class="muted small" data-i18n="footer">
        Kaynaklar ve yÃ¶ntem bilgisi mescid profilinden gelir. Bu sayfa yalnÄ±zca bilgi amaÃ§lÄ±dÄ±r.
      </div>
    </footer>

    <div class="action-bar" id="actionBar" aria-label="HÄ±zlÄ± iÅŸlemler">
      <button class="action-bar__btn" id="actionRefreshBtn" type="button" data-i18n="refresh">Yenile</button>
      <button class="action-bar__btn" id="actionLocationBtn" type="button" data-i18n="getLocation">Konum Al</button>
      <button class="action-bar__btn" id="actionSettingsBtn" type="button" data-i18n="settings">Ayarlar</button>
    </div>

    <div class="modal" id="settingsModal" hidden>
      <div class="modal__backdrop" data-close="settings"></div>
      <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
        <div class="modal__header">
          <h2 class="h2" id="settingsTitle" data-i18n="settings">Ayarlar</h2>
          <button class="btn btn--ghost" id="settingsCloseBtn" type="button" aria-label="Kapat">âœ•</button>
        </div>
        <div class="modal__body">
          <section class="settings-section">
            <h3 class="h3" data-i18n="methodSettings">Hesaplama YÃ¶ntemi</h3>
            <div class="row row--wrap">
              <label class="field">
                <span class="field__label" data-i18n="methodId">Method ID</span>
                <select id="methodSelect" class="select" aria-label="Method ID"></select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="asrSchool">Asr (School)</span>
                <select id="schoolSelect" class="select" aria-label="Asr school">
                  <option value="standard">Standard</option>
                  <option value="hanafi">Hanafi</option>
                </select>
              </label>
              <label class="field">
                <span class="field__label" data-i18n="highLat">High Latitude Rule</span>
                <select id="highLatSelect" class="select" aria-label="High latitude rule">
                  <option value="angleBased">Angle-based</option>
                  <option value="midnight">Midnight</option>
                  <option value="oneSeventh">One-Seventh</option>
                </select>
              </label>
            </div>
            <div class="row row--wrap">
              <button class="btn btn--ghost" id="resetMethodBtn" type="button" data-i18n="resetMethod">Mescid varsayÄ±lanÄ±na dÃ¶n</button>
              <div class="muted small" id="methodScopeNote">â€”</div>
            </div>
          </section>

          <section class="settings-section">
            <h3 class="h3" data-i18n="savedLocations">KayÄ±tlÄ± Konumlar</h3>
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="savedLocationsLabel">KayÄ±tlÄ± konumlar</span>
                <select id="savedLocationsSelect" class="select" aria-label="KayÄ±tlÄ± konumlar"></select>
              </label>
              <button id="useSavedLocationBtn" class="btn" type="button" data-i18n="use">Kullan</button>
              <button id="removeSavedLocationBtn" class="btn btn--ghost" type="button" data-i18n="remove">Sil</button>
            </div>
            <div class="row row--wrap">
              <label class="field grow">
                <span class="field__label" data-i18n="saveCurrentLabel">Mevcut konumu kaydet</span>
                <input id="saveLocationLabelInput" class="input" type="text" placeholder="Ã¶r: Ev" />
              </label>
              <button id="saveLocationBtn" class="btn" type="button" data-i18n="save">Kaydet</button>
            </div>
            <p class="muted small" data-i18n="savedLocationsNote">
              Konumlar cihazda saklanÄ±r ve Supabase'e yazÄ±lmaz.
            </p>
          </section>

          <section class="settings-section">
            <h3 class="h3" data-i18n="language">Dil</h3>
            <button class="btn btn--ghost" id="langToggleBtn2" type="button">
              <span class="mono">TR / EN</span>
            </button>
          </section>
        </div>
      </div>
    </div>

    <!-- Hidden i18n dictionary (app.js will use these keys) -->
    <script type="application/json" id="i18nDict">
    {
      "tr": {
        "skip": "Ä°Ã§eriÄŸe atla",
        "masjid": "Mescid",
        "settings": "Ayarlar",
        "copyLink": "Linki Kopyala",
        "slugTitle": "Mescid Linki",
        "slugHelp": "Bu sayfa genellikle paylaÅŸÄ±lmÄ±ÅŸ bir link ile aÃ§Ä±lÄ±r: /?m=mescid-slug. Slug yoksa aÅŸaÄŸÄ±dan gir.",
        "slugLabel": "Mescid Slug",
        "open": "AÃ§",
        "slugExample": "Ã–rnek: ?m=sanjose-umut-mescid | Ä°kame seti: &set=main",
        "nextTitle": "SÄ±radaki Vakit",
        "adhanOrIqama": "â€”",
        "remaining": "Kalan",
        "refresh": "Yenile",
        "getLocation": "Konum Al",
        "location": "Konum",
        "source": "Kaynak",
        "iqamaSet": "Ä°kame Seti",
        "manualLocationSummary": "Konum izni yoksa ÅŸehir/adres gir",
        "manualLocationLabel": "Åehir / Adres",
        "search": "Ara",
        "manualLocationNote": "Not: Bu giriÅŸ yaklaÅŸÄ±k konumla vakit Ã§ekmek iÃ§indir. En doÄŸru sonuÃ§ iÃ§in konum izni Ã¶nerilir.",
        "todayTitle": "BugÃ¼nÃ¼n Vakitleri",
        "prayer": "Vakit",
        "adhanSafe": "Adhan (Ä°htiyatlÄ±)",
        "iqama": "Ä°kame",
        "status": "Durum",
        "safetyNote": "GÃ¶rÃ¼ntÃ¼lenen adhan vakitleri ihtiyat payÄ± iÃ§erir.",
        "disclaimer": "Ä°htiyat ve yÃ¶ntem detaylarÄ± aÅŸaÄŸÄ±daki â€œDetaylarâ€ bÃ¶lÃ¼mÃ¼nde gÃ¶rÃ¼nÃ¼r.",
        "detailsTitle": "Ayarlar / Detaylar",
        "calcSummary": "Hesaplama yÃ¶ntemi",
        "provider": "Provider",
        "methodId": "Method ID",
        "asrSchool": "Asr (School)",
        "highLat": "High Latitude Rule",
        "tune": "Tune/Adjust",
        "asrNote": "Not: Asr â€œhanafiâ€ daha geÃ§ Ã§Ä±kabilir. Bu ayar mescid profilinde ÅŸeffafÃ§a belirtilir.",
        "safetySummary": "Ä°htiyat (Safety Buffer) dakikalarÄ±",
        "shareSummary": "PaylaÅŸ",
        "shareLinkLabel": "PaylaÅŸÄ±m Linki",
        "copy": "Kopyala",
        "shareNote": "Link formatÄ±: /?m=<slug> veya /?m=<slug>&set=<iqamaSetId>",
        "methodSettings": "Hesaplama YÃ¶ntemi",
        "resetMethod": "Mescid varsayÄ±lanÄ±na dÃ¶n",
        "savedLocations": "KayÄ±tlÄ± Konumlar",
        "savedLocationsLabel": "KayÄ±tlÄ± konumlar",
        "saveCurrentLabel": "Mevcut konumu kaydet",
        "save": "Kaydet",
        "remove": "Sil",
        "use": "Kullan",
        "savedLocationsNote": "Konumlar cihazda saklanÄ±r ve Supabase'e yazÄ±lmaz.",
        "language": "Dil",
        "footer": "Kaynaklar ve yÃ¶ntem bilgisi mescid profilinden gelir. Bu sayfa yalnÄ±zca bilgi amaÃ§lÄ±dÄ±r."
      },
      "en": {
        "skip": "Skip to content",
        "masjid": "Masjid",
        "settings": "Settings",
        "copyLink": "Copy link",
        "slugTitle": "Masjid Link",
        "slugHelp": "This page is usually opened via a shared link: /?m=masjid-slug. If missing, enter it below.",
        "slugLabel": "Masjid Slug",
        "open": "Open",
        "slugExample": "Example: ?m=sanjose-umut-mescid | Iqama set: &set=main",
        "nextTitle": "Next Prayer",
        "adhanOrIqama": "â€”",
        "remaining": "Remaining",
        "refresh": "Refresh",
        "getLocation": "Get location",
        "location": "Location",
        "source": "Source",
        "iqamaSet": "Iqama Set",
        "manualLocationSummary": "If location is blocked, enter city/address",
        "manualLocationLabel": "City / Address",
        "search": "Search",
        "manualLocationNote": "Note: This uses an approximate location to fetch timings. For best accuracy, allow location access.",
        "todayTitle": "Today's Timings",
        "prayer": "Prayer",
        "adhanSafe": "Adhan (Safety-adjusted)",
        "iqama": "Iqama",
        "status": "Status",
        "safetyNote": "Displayed adhan times include safety offsets.",
        "disclaimer": "Safety offsets and calculation details are shown in the â€œDetailsâ€ section below.",
        "detailsTitle": "Settings / Details",
        "calcSummary": "Calculation method",
        "provider": "Provider",
        "methodId": "Method ID",
        "asrSchool": "Asr (School)",
        "highLat": "High Latitude Rule",
        "tune": "Tune/Adjust",
        "asrNote": "Note: Hanafi Asr can be later. This will be transparently shown in the masjid profile.",
        "safetySummary": "Safety offsets (minutes)",
        "shareSummary": "Share",
        "shareLinkLabel": "Share link",
        "copy": "Copy",
        "shareNote": "Link format: /?m=<slug> or /?m=<slug>&set=<iqamaSetId>",
        "methodSettings": "Calculation Method",
        "resetMethod": "Reset to masjid defaults",
        "savedLocations": "Saved Locations",
        "savedLocationsLabel": "Saved locations",
        "saveCurrentLabel": "Save current location",
        "save": "Save",
        "remove": "Remove",
        "use": "Use",
        "savedLocationsNote": "Locations are stored on this device and never written to Supabase.",
        "language": "Language",
        "footer": "Method and settings come from the masjid profile. This page is informational."
      }
    }
    </script>
  </main>
</body>
</html>
